<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Genus</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Usage guide</li><li class="chapter-item expanded "><a href="usage/howto.html"><strong aria-hidden="true">1.</strong> How to use genus</a></li><li class="chapter-item expanded "><a href="usage/examples.html"><strong aria-hidden="true">2.</strong> Examples</a></li><li class="chapter-item expanded affix "><li class="part-title">Reference guide</li><li class="chapter-item expanded "><a href="reference/chromosomes.html"><strong aria-hidden="true">3.</strong> Chromosomes</a></li><li class="chapter-item expanded "><a href="reference/operations.html"><strong aria-hidden="true">4.</strong> Operations</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="reference/operations/elementary.html"><strong aria-hidden="true">4.1.</strong> Elementary operators</a></li><li class="chapter-item expanded "><a href="reference/operations/genetic.html"><strong aria-hidden="true">4.2.</strong> Genetic operators</a></li><li class="chapter-item expanded "><a href="reference/operations/meta.html"><strong aria-hidden="true">4.3.</strong> Meta operators</a></li></ol></li><li class="chapter-item expanded "><a href="reference/runner.html"><strong aria-hidden="true">5.</strong> Runner</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Genus</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>Hello world!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="usage-guidelines"><a class="header" href="#usage-guidelines">Usage guidelines</a></h1>
<p>In this section, a brief overview of how <em>genus</em> can be used to solve optimization problems is given. For a more complex understanding read the full documentation.</p>
<h2 id="general-idea"><a class="header" href="#general-idea">General idea</a></h2>
<p>The general process of implementing a solution in <em>genus</em> is:</p>
<ol>
<li>Define a fitness function.</li>
<li>Create the initial population which contains the fitness function.</li>
<li>Create the pipeline to use for the problem. A good example of a pipeline that should work for most problems can be found in the <code>maximize_ones</code> example, which consists of a <code>Sequential</code> operation that contains:
<ul>
<li><code>ElitismSelection</code> and <code>TwoParentCrossover</code> done in parallel, with sizes that preserve the original size of the population.</li>
<li><code>Join</code> to resolve the divergence created by <code>Parallel</code> by joining both populations.</li>
<li><code>BinaryMutation</code> to introduce randomness and allow finding the global maximum.</li>
</ul>
</li>
<li>Create a <code>Runner</code>, which you can initialize with the defined pipeline and initial population, and in which you can specify a stop criterion that the runner uses to decide when to stop the training.</li>
<li>Run the training and use your results! The last obtained population is contained in the <code>x</code> attribute in the runner.</li>
</ol>
<p>Alternatively, you can manually run each iteration if you need a lower level interface to the training. Also consider that the runner can take an <strong>start hook</strong> and an <strong>update hook</strong>, which are functions that take the runner instance as an input and return nothing: these can be used for any special functionality that you need to add (e.g adding a progress bar to show the progress of the training. For an example of this see the <em>maximimize_ones</em> example).</p>
<p>It is important to consider that most operations have hyperparameters that must be passed, which have a great influence on whether the implemented solution works or not. It is up to the user to pass the correct hyperparameters.</p>
<p>Another important aspect to consider is that the given pipeline is only a recommendation: more operations can be included in the pipeline, the order of operations can be changed, and custom operations can be defined, depending on the problem and your proposed solution. <em>genus</em> only gives you the tools: it is up to you to use them properly :)</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="example-guidelines"><a class="header" href="#example-guidelines">Example guidelines</a></h1>
<h2 id="how-to-run-examples"><a class="header" href="#how-to-run-examples">How to run examples</a></h2>
<p>To run an example, standing at the root directory of the project simply run</p>
<pre><code class="language-bash">python -m examples &lt;EXAMPLE&gt; [&lt;POSITIONAL_ARGUMENTS&gt;...] [&lt;KEYWORD_ARGUMENTS&gt;...]
</code></pre>
<p>Keyword arguments are specified by passing an argument of the form <code>&lt;key&gt;=&lt;value&gt;</code>. The type of the value must be handled and cast by the example, to avoid any errors or unexpected behaviour.</p>
<p>Additionally, the following flags can be passed to the example:</p>
<ul>
<li><code>-v</code>, <code>--verbose</code> : Runs in verbose mode, which means any logs of level <em>INFO</em> and above are printed to stdout.</li>
<li><code>-d</code>, <code>--debug</code> : Runs in debug mode, which means any logs of level <em>DEBUG</em> and above are printed to stdout, and it might enable special debugging behaviour, depending on the example.</li>
<li><code>--log &lt;LOG&gt;</code> : Makes the program output all logs to the file given by <code>&lt;LOG&gt;</code>, overwriting if necessary.</li>
<li><code>-q</code>, <code>--quiet</code> : Disable all logging (<strong>WARNING</strong>: This even disables <em>ERROR</em> and <em>CRITICAL</em> level logs, which is probably not what you desire).</li>
<li><code>-h</code>, <code>--help</code> : Show the help menu.</li>
</ul>
<h2 id="adding-examples"><a class="header" href="#adding-examples">Adding examples</a></h2>
<p>To add another example, simply create a module in the <em>examples</em> directory! There are two ways to do this:</p>
<ul>
<li>If it is a small example, create a <em>.py</em> file for your example, making sure to add a <code>main()</code> function that receives all necessary arguments (this function is necessary, as it acts as the starting point for the example).</li>
<li>If the example is larger and requires multiple files, create a directory within <em>examples</em> and add an <em>__init__.py</em> file which must contain the <code>main()</code> function.</li>
</ul>
<p>An important point to notice is that, as of currently, all arguments are passed to the <code>main()</code> function as a string. This means that it is the developer's responsability to transform them into the appropiate data type to avoid crashes or undefined behaviour (this will probably be fixed in the future for a nicer developer experience).</p>
<p>Setting the correct path for the examples to import the currently cloned version is automatically done by the <em>examples</em> module, so all you need to do is import <em>genus</em> as if it was installed in your system.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chromomes-and-populations"><a class="header" href="#chromomes-and-populations">Chromomes and populations</a></h1>
<p>All the genetic information of an organism is contained within chromosomes, which are instances of the <code>Chromosome</code> class. These chromosomes store genetic code in a numpy array of <code>uint8</code> types which contain zeros and ones<sup class="footnote-reference"><a href="#1">1</a></sup>, representing the genome as a binary code.</p>
<h2 id="operators-on-chromosomes"><a class="header" href="#operators-on-chromosomes">Operators on chromosomes</a></h2>
<p>There are the <code>concatenate</code> and <code>split</code> functions that can be applied directly on chromosomes, which allow for mixing and splitting of chromosomes, respectively. These act as operators on chromosomes, and they are the base of some of the more complex operators that are described later.</p>
<h2 id="populations"><a class="header" href="#populations">Populations</a></h2>
<p>In <em>genus</em> there exists the concept of a population, modelled by the <code>Population</code> class, which is just a group of chromosomes that are related in some way. Most complex operators act on these populations, as they usually represent chromosomes which belong to the same generation during training.</p>
<p>Populations also contain a fitness function \(F: \mathcal{C}\rightarrow\mathbb{R}\), such that \(F(c), c\in\mathcal{C}\) indicates how fit a chromosome \(c\) is, where \(\mathcal{C}\) is the space of all possible chromosomes. This fitness function is then used by the algorithm, by making it so that those organisms which are stronger (meaning they map to a higher value through the fitness function) are more likely to produce offspring or go straight trough to the next generation than those who are weaker. After some number of generations, this ensures that the population is composed mostly of those individuals who are stronger, leading to better solutions to the proposed problem.</p>
<p>These populations can also be joined using the <code>concatenate()</code> function, which simply takes the chromosomes from all the given populations and groups them together into a new one. This function can take a <code>fitness</code> argument, which would represent the fitness function that the new population should have: if no fitness function is given, it will simply take the fitness function from the first given population.</p>
<hr />
<div class="footnote-definition" id="1"><sup class="footnote-definition-label">1</sup>
<p>This is memory inneficient, as you are using 8 bits for what could be stored in just 1, but as a first implementation it works and hasn't given me any trouble. In the future, to allow solving bigger problems where memory might be an issue, this is going to be optimized (which should allow for more memory efficiency as well as lower runtimes).</p>
</div>
<div style="break-before: page; page-break-before: always;"></div><h1 id="operations"><a class="header" href="#operations">Operations</a></h1>
<p>The way in which <em>genus</em> handles operations is similar to the way in which <em>PyTorch</em> handles layers and modules. In <em>genus</em>, all functionality is realized through classes that inherit from the <code>Operation</code> interface, implementing the <code>forward()</code> method. The <code>__call__</code> dunder in <code>Operation</code> is overwritten so that it calls the <code>forward()</code> method, as well as do some debug logging and other important functionality: this way, operations can be instantiated and then called directly on the inputs.</p>
<p>Operations are separated into three default classes: elementary operations, genetic operations, and meta operations. However, more operations can be created by the user by simply creating classes that inherit from <code>Operation</code> or some other pre-fabricated operation, and implement the necessary behaviour inside <code>forward()</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="elementary-operations"><a class="header" href="#elementary-operations">Elementary operations</a></h1>
<p>Elementary operations are those that do simple tasks. The currently implemented operations are the following:</p>
<ul>
<li><code>Identity</code>: Simply returns the input without modification.</li>
<li><code>Join</code>: Takes many items than can be concatenated, and joins them into a single item.</li>
<li><code>Lambda</code>: Takes some function and applies it directly to the input.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="genetic-operations"><a class="header" href="#genetic-operations">Genetic operations</a></h1>
<p>Genetic operations are those that modify the genetic content inside of a chromosome. The currently implemented genetic operations are:</p>
<ul>
<li>
<p><strong>Crossover</strong>: The crossover operation tries to mix the genetic material of existing chromosomes to create better offspring. The way parents are chosen is based on fitness: a probability function is given, which uses the fitness of each chromosome to associate its probability to be chosen for reproduction, such that stronger individuals have a higher probability. This choosing is done with replacement, meaning that one chromosome can reproduce many times in a single crossover operation: this even allows for asexual reproduction, where a chromosome mates with itself to create offspring that will be exactly equal to the parent (save for mutations).</p>
<ul>
<li><code>TwoParentCrossover</code>: Takes the genetic material of two parents and does a crossover at a random point with some probability (tipically 1). This leads to two offspring per mating.</li>
</ul>
</li>
<li>
<p><strong>Mutation</strong>: Mutation is a mechanism that allows populations to explore the entire search space of a problem, thus avoiding local maxima and allowing them to find the true global maximum. It works by modifying the genetic material of a chromosome with some small probability, leading to offspring that can have genetic material that is slightly different than their parents'. Together with the other operations, this can lead to better solutions.</p>
<ul>
<li><code>BinaryMutation</code>: Assumes the genetic material is composed of ones and zeros, so there is a small chance that one bit in the code is flipped.</li>
</ul>
</li>
<li>
<p><strong>Selection</strong>: Selection is a mechanism through which strong parents can pass straight to the next generation. This can allow, for example, for a generation to be composed of chromosomes with a really high fitness together with their offspring.</p>
<ul>
<li><code>ElitismSelection</code>: The best \(n\) chromosomes pass to the next generation while the rest are discarded, where \(n\) is a hyperparameter of the problem.</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="meta-operations"><a class="header" href="#meta-operations">Meta operations</a></h1>
<p>Meta operations are those whose purpose is to call other operations. The currently implemented ones are:</p>
<ul>
<li><code>Sequential</code>: Sequentally calls the given operations, using the output of one operation as the input to the next. This allows for the formation of pipelines of operations, which give rise to complex training sequences.</li>
<li><code>Parallel</code>: Runs many operations in parallel, returning the result in a list of populations. This creates a divergence and thus must be resolved using some operation that acts on a list of populations instead of a single one. This operation <strong>does not guarantee</strong> that the order of the results matches the ordering of the inputs, as it uses multithreading to speed up execution.</li>
<li><code>ParallelOrdered</code>: Runs many operations in parallel, returning the result in a list of populations. This creates a divergence and thus must be resolved using some operation that acts on a list of populations instead of a single one. Unlike <code>Parallel</code>, this does guarantee that the results are in the same order as the given operations, risking a <strong>potentially</strong> slightly slower execution.</li>
<li><code>ForEach</code>: Takes any operation and iteratively applies it to each element of the input. For this reason, the input to this function has to be an object you can iterate over</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="runner"><a class="header" href="#runner">Runner</a></h1>
<p>The runner is the class that <em>genus</em> creates to run training, set training parameters, etc. It contains the current population in the <code>x</code> attribute, the used pipeline, a stop criterion (of which we will talk about in <a href="reference/runner.html#stop-criterions">Stop criterions</a>), the current generation, start and update hooks (which you tipically will not use, but are useful for debugging or display reasons), and any other relevant information.</p>
<p>It contains three important methods:</p>
<ul>
<li><code>start</code>, which is meant to be run once when starting the training, as it inializes all necessary variables and sets-up the runner for training. This method runs the <code>_start_hook</code> hook, used when creating the runner.</li>
<li><code>update</code>, which applies an iteration/generation of training, evaluating the pipeline on the current population. This method runs the <code>_update_hook</code> hook, used when creating the runner.</li>
<li><code>run</code>, which runs the <code>start</code> method once and runs <code>update</code> until the stop criterion determines that the simulation should stop.</li>
</ul>
<h1 id="stop-criterions"><a class="header" href="#stop-criterions">Stop criterions</a></h1>
<p>The stop criterions, defined through the <code>StopCriterion</code> interface, are objects that implement the <code>should_stop</code> method, which takes the runner as an argument and determine whether the simulation should stop or not. You can define custom criterions if necessary, but the currently implemented ones are:</p>
<ul>
<li><code>GenerationCriterion(gen_num)</code>, which stops the simulation once <code>gen_num</code> generations are trained.</li>
<li><code>ConvergenceCriterion(epsilon, num, max_generations: Optional)</code>, which stops the simulation once the current and previous fitness differ by less than <code>epsilon</code> some number of times, specified through the <code>num</code> parameter (by default 5). You can optionally pass a parameter <code>max_generations</code>, that stops the simulation if <code>max_generations</code> generations are trained, logging a warning.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>

    </div>
    </body>
</html>
